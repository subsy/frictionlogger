"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/analyze-video";
exports.ids = ["pages/api/analyze-video"];
exports.modules = {

/***/ "@ffmpeg-installer/ffmpeg":
/*!*******************************************!*\
  !*** external "@ffmpeg-installer/ffmpeg" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("@ffmpeg-installer/ffmpeg");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "fluent-ffmpeg":
/*!********************************!*\
  !*** external "fluent-ffmpeg" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("fluent-ffmpeg");

/***/ }),

/***/ "form-data":
/*!****************************!*\
  !*** external "form-data" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("form-data");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "@mux/mux-node":
/*!********************************!*\
  !*** external "@mux/mux-node" ***!
  \********************************/
/***/ ((module) => {

module.exports = import("@mux/mux-node");;

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-video&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze-video.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-video&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze-video.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_analyze_video_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/analyze-video.ts */ \"(api)/./pages/api/analyze-video.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_analyze_video_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_analyze_video_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_video_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_video_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/analyze-video\",\n        pathname: \"/api/analyze-video\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_analyze_video_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFuYWx5emUtdmlkZW8mcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmFuYWx5emUtdmlkZW8udHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDeUQ7QUFDekQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcmljdGlvbmxvZ2dlci8/YWFiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2FuYWx5emUtdmlkZW8udHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXplLXZpZGVvXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl6ZS12aWRlb1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-video&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze-video.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mux.ts":
/*!********************!*\
  !*** ./lib/mux.ts ***!
  \********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUploadUrl: () => (/* binding */ createUploadUrl),\n/* harmony export */   getAssetDetails: () => (/* binding */ getAssetDetails),\n/* harmony export */   getAssetIdFromUpload: () => (/* binding */ getAssetIdFromUpload)\n/* harmony export */ });\n/* harmony import */ var _mux_mux_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @mux/mux-node */ \"@mux/mux-node\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_mux_mux_node__WEBPACK_IMPORTED_MODULE_0__]);\n_mux_mux_node__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst muxClient = new _mux_mux_node__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    tokenId: process.env.MUX_TOKEN_ID,\n    tokenSecret: process.env.MUX_TOKEN_SECRET\n});\nconst { video } = muxClient;\n// Function to create an upload URL and return both URL and Upload ID\nasync function createUploadUrl() {\n    const upload = await video.uploads.create({\n        new_asset_settings: {\n            playback_policy: [\n                \"public\"\n            ]\n        },\n        cors_origin: \"http://localhost:3000\" || 0\n    });\n    console.log(\"Mux upload response:\", upload);\n    return {\n        url: upload.url,\n        uploadId: upload.id\n    };\n}\n// Function to retrieve Asset ID from Upload ID with retries\nasync function getAssetIdFromUpload(uploadId, retries = 5, delayMs = 2000) {\n    for(let attempt = 1; attempt <= retries; attempt++){\n        try {\n            const upload = await video.uploads.retrieve(uploadId);\n            if (upload.asset_id) {\n                return upload.asset_id;\n            }\n            console.log(`Attempt ${attempt}: Asset ID not found for Upload ID ${uploadId}. Retrying in ${delayMs}ms...`);\n        } catch (error) {\n            console.error(`Attempt ${attempt}: Error retrieving Mux upload:`, error);\n        }\n        await new Promise((res)=>setTimeout(res, delayMs));\n    }\n    return null;\n}\n// Function to retrieve Asset Details\nasync function getAssetDetails(assetId) {\n    try {\n        const asset = await video.assets.retrieve(assetId);\n        return asset;\n    } catch (error) {\n        console.error(\"Error retrieving Mux asset details:\", error);\n        return null;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbXV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsWUFBWSxJQUFJRCxxREFBR0EsQ0FBQztJQUN4QkUsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0lBQ2pDQyxhQUFhSCxRQUFRQyxHQUFHLENBQUNHLGdCQUFnQjtBQUMzQztBQUVBLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUdQO0FBRWxCLHFFQUFxRTtBQUM5RCxlQUFlUTtJQUNwQixNQUFNQyxTQUFTLE1BQU1GLE1BQU1HLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDO1FBQ3hDQyxvQkFBb0I7WUFBRUMsaUJBQWlCO2dCQUFDO2FBQVM7UUFBQztRQUNsREMsYUFBYVosdUJBQTJCLElBQUk7SUFDOUM7SUFFQWMsUUFBUUMsR0FBRyxDQUFDLHdCQUF3QlI7SUFFcEMsT0FBTztRQUFFUyxLQUFLVCxPQUFPUyxHQUFHO1FBQUVDLFVBQVVWLE9BQU9XLEVBQUU7SUFBQztBQUNoRDtBQUVBLDREQUE0RDtBQUNyRCxlQUFlQyxxQkFBcUJGLFFBQWdCLEVBQUVHLFVBQVUsQ0FBQyxFQUFFQyxVQUFVLElBQUk7SUFDdEYsSUFBSyxJQUFJQyxVQUFVLEdBQUdBLFdBQVdGLFNBQVNFLFVBQVc7UUFDbkQsSUFBSTtZQUNGLE1BQU1mLFNBQVMsTUFBTUYsTUFBTUcsT0FBTyxDQUFDZSxRQUFRLENBQUNOO1lBQzVDLElBQUlWLE9BQU9pQixRQUFRLEVBQUU7Z0JBQ25CLE9BQU9qQixPQUFPaUIsUUFBUTtZQUN4QjtZQUNBVixRQUFRQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUVPLFFBQVEsbUNBQW1DLEVBQUVMLFNBQVMsY0FBYyxFQUFFSSxRQUFRLEtBQUssQ0FBQztRQUM3RyxFQUFFLE9BQU9JLE9BQU87WUFDZFgsUUFBUVcsS0FBSyxDQUFDLENBQUMsUUFBUSxFQUFFSCxRQUFRLDhCQUE4QixDQUFDLEVBQUVHO1FBQ3BFO1FBQ0EsTUFBTSxJQUFJQyxRQUFRQyxDQUFBQSxNQUFPQyxXQUFXRCxLQUFLTjtJQUMzQztJQUNBLE9BQU87QUFDVDtBQUVBLHFDQUFxQztBQUM5QixlQUFlUSxnQkFBZ0JDLE9BQWU7SUFDbkQsSUFBSTtRQUNGLE1BQU1DLFFBQVEsTUFBTTFCLE1BQU0yQixNQUFNLENBQUNULFFBQVEsQ0FBQ087UUFDMUMsT0FBT0M7SUFDVCxFQUFFLE9BQU9OLE9BQU87UUFDZFgsUUFBUVcsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcmljdGlvbmxvZ2dlci8uL2xpYi9tdXgudHM/MjdlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTXV4IGZyb20gJ0BtdXgvbXV4LW5vZGUnO1xuXG5jb25zdCBtdXhDbGllbnQgPSBuZXcgTXV4KHtcbiAgdG9rZW5JZDogcHJvY2Vzcy5lbnYuTVVYX1RPS0VOX0lEISxcbiAgdG9rZW5TZWNyZXQ6IHByb2Nlc3MuZW52Lk1VWF9UT0tFTl9TRUNSRVQhXG59KTtcblxuY29uc3QgeyB2aWRlbyB9ID0gbXV4Q2xpZW50O1xuXG4vLyBGdW5jdGlvbiB0byBjcmVhdGUgYW4gdXBsb2FkIFVSTCBhbmQgcmV0dXJuIGJvdGggVVJMIGFuZCBVcGxvYWQgSURcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVcGxvYWRVcmwoKSB7XG4gIGNvbnN0IHVwbG9hZCA9IGF3YWl0IHZpZGVvLnVwbG9hZHMuY3JlYXRlKHtcbiAgICBuZXdfYXNzZXRfc2V0dGluZ3M6IHsgcGxheWJhY2tfcG9saWN5OiBbJ3B1YmxpYyddIH0sXG4gICAgY29yc19vcmlnaW46IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1VSTCB8fCAnJyxcbiAgfSk7XG5cbiAgY29uc29sZS5sb2coJ011eCB1cGxvYWQgcmVzcG9uc2U6JywgdXBsb2FkKTtcblxuICByZXR1cm4geyB1cmw6IHVwbG9hZC51cmwsIHVwbG9hZElkOiB1cGxvYWQuaWQgfTtcbn1cblxuLy8gRnVuY3Rpb24gdG8gcmV0cmlldmUgQXNzZXQgSUQgZnJvbSBVcGxvYWQgSUQgd2l0aCByZXRyaWVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXNzZXRJZEZyb21VcGxvYWQodXBsb2FkSWQ6IHN0cmluZywgcmV0cmllcyA9IDUsIGRlbGF5TXMgPSAyMDAwKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IHJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cGxvYWQgPSBhd2FpdCB2aWRlby51cGxvYWRzLnJldHJpZXZlKHVwbG9hZElkKTtcbiAgICAgIGlmICh1cGxvYWQuYXNzZXRfaWQpIHtcbiAgICAgICAgcmV0dXJuIHVwbG9hZC5hc3NldF9pZDtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGBBdHRlbXB0ICR7YXR0ZW1wdH06IEFzc2V0IElEIG5vdCBmb3VuZCBmb3IgVXBsb2FkIElEICR7dXBsb2FkSWR9LiBSZXRyeWluZyBpbiAke2RlbGF5TXN9bXMuLi5gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgQXR0ZW1wdCAke2F0dGVtcHR9OiBFcnJvciByZXRyaWV2aW5nIE11eCB1cGxvYWQ6YCwgZXJyb3IpO1xuICAgIH1cbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIGRlbGF5TXMpKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLy8gRnVuY3Rpb24gdG8gcmV0cmlldmUgQXNzZXQgRGV0YWlsc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFzc2V0RGV0YWlscyhhc3NldElkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhc3NldCA9IGF3YWl0IHZpZGVvLmFzc2V0cy5yZXRyaWV2ZShhc3NldElkKTtcbiAgICByZXR1cm4gYXNzZXQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmV0cmlldmluZyBNdXggYXNzZXQgZGV0YWlsczonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbIk11eCIsIm11eENsaWVudCIsInRva2VuSWQiLCJwcm9jZXNzIiwiZW52IiwiTVVYX1RPS0VOX0lEIiwidG9rZW5TZWNyZXQiLCJNVVhfVE9LRU5fU0VDUkVUIiwidmlkZW8iLCJjcmVhdGVVcGxvYWRVcmwiLCJ1cGxvYWQiLCJ1cGxvYWRzIiwiY3JlYXRlIiwibmV3X2Fzc2V0X3NldHRpbmdzIiwicGxheWJhY2tfcG9saWN5IiwiY29yc19vcmlnaW4iLCJORVhUX1BVQkxJQ19VUkwiLCJjb25zb2xlIiwibG9nIiwidXJsIiwidXBsb2FkSWQiLCJpZCIsImdldEFzc2V0SWRGcm9tVXBsb2FkIiwicmV0cmllcyIsImRlbGF5TXMiLCJhdHRlbXB0IiwicmV0cmlldmUiLCJhc3NldF9pZCIsImVycm9yIiwiUHJvbWlzZSIsInJlcyIsInNldFRpbWVvdXQiLCJnZXRBc3NldERldGFpbHMiLCJhc3NldElkIiwiYXNzZXQiLCJhc3NldHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/mux.ts\n");

/***/ }),

/***/ "(api)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://cuhbpffpltabcwakahem.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN1aGJwZmZwbHRhYmN3YWthaGVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjg3MzI2NTQsImV4cCI6MjA0NDMwODY1NH0.hm4ce7rQT5aFVd-Q5ZW_xXMuwL7QNRI5L1Ua8vI-Ddk\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFEO0FBRXJELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxrQkFBa0JILGtOQUF5QztBQUUxRCxNQUFNSyxXQUFXUCxtRUFBWUEsQ0FBQ0MsYUFBYUksaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJpY3Rpb25sb2dnZXIvLi9saWIvc3VwYWJhc2UudHM/Yzk5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCE7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSE7XG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTsiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.ts\n");

/***/ }),

/***/ "(api)/./lib/whisper.ts":
/*!************************!*\
  !*** ./lib/whisper.ts ***!
  \************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transcribeAudio: () => (/* binding */ transcribeAudio)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _ffmpeg_installer_ffmpeg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ffmpeg-installer/ffmpeg */ \"@ffmpeg-installer/ffmpeg\");\n/* harmony import */ var _ffmpeg_installer_ffmpeg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_ffmpeg_installer_ffmpeg__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fluent_ffmpeg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fluent-ffmpeg */ \"fluent-ffmpeg\");\n/* harmony import */ var fluent_ffmpeg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fluent_ffmpeg__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var form_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! form-data */ \"form-data\");\n/* harmony import */ var form_data__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(form_data__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nfluent_ffmpeg__WEBPACK_IMPORTED_MODULE_2___default().setFfmpegPath((_ffmpeg_installer_ffmpeg__WEBPACK_IMPORTED_MODULE_1___default().path));\n/**\n * Transcribes audio extracted from a video URL using OpenAI's Whisper API.\n * @param videoUrl - The URL of the video to transcribe.\n * @returns The transcription text.\n */ async function transcribeAudio(videoUrl) {\n    try {\n        // Step 1: Download the video and convert to MP3 using ffmpeg\n        const outputPath = `/tmp/${Date.now()}.mp3`;\n        await new Promise((resolve, reject)=>{\n            fluent_ffmpeg__WEBPACK_IMPORTED_MODULE_2___default()(videoUrl).outputOptions(\"-vn\").audioCodec(\"libmp3lame\").audioBitrate(\"128k\").output(outputPath).on(\"end\", resolve).on(\"error\", reject).run();\n        });\n        // Step 2: Read the MP3 file\n        const audioFile = fs__WEBPACK_IMPORTED_MODULE_4___default().createReadStream(outputPath);\n        // Step 3: Prepare form data for Whisper API\n        const form = new (form_data__WEBPACK_IMPORTED_MODULE_3___default())();\n        form.append(\"file\", audioFile, {\n            filename: \"audio.mp3\",\n            contentType: \"audio/mpeg\"\n        });\n        form.append(\"model\", \"whisper-1\");\n        // Step 4: Send audio file to Whisper API\n        const transcriptionResponse = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(\"https://api.openai.com/v1/audio/transcriptions\", form, {\n            headers: {\n                ...form.getHeaders(),\n                \"Authorization\": `Bearer ${process.env.OPENAI_API_KEY}`\n            },\n            timeout: 60000\n        });\n        // Step 5: Clean up the temporary file\n        fs__WEBPACK_IMPORTED_MODULE_4___default().unlinkSync(outputPath);\n        return transcriptionResponse.data.text;\n    } catch (error) {\n        console.error(\"Error in transcribeAudio:\", error);\n        throw new Error(\"Failed to transcribe audio: \" + error.message);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvd2hpc3Blci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQTBCO0FBQzZCO0FBQ3BCO0FBRUY7QUFDYjtBQUVwQkUsa0VBQW9CLENBQUNELHNFQUFvQjtBQUV6Qzs7OztDQUlDLEdBQ00sZUFBZU0sZ0JBQWdCQyxRQUFnQjtJQUNwRCxJQUFJO1FBQ0YsNkRBQTZEO1FBQzdELE1BQU1DLGFBQWEsQ0FBQyxLQUFLLEVBQUVDLEtBQUtDLEdBQUcsR0FBRyxJQUFJLENBQUM7UUFDM0MsTUFBTSxJQUFJQyxRQUFRLENBQUNDLFNBQVNDO1lBQzFCWixvREFBTUEsQ0FBQ00sVUFDSk8sYUFBYSxDQUFDLE9BQ2RDLFVBQVUsQ0FBQyxjQUNYQyxZQUFZLENBQUMsUUFDYkMsTUFBTSxDQUFDVCxZQUNQVSxFQUFFLENBQUMsT0FBT04sU0FDVk0sRUFBRSxDQUFDLFNBQVNMLFFBQ1pNLEdBQUc7UUFDUjtRQUVBLDRCQUE0QjtRQUM1QixNQUFNQyxZQUFZakIsMERBQW1CLENBQUNLO1FBRXRDLDRDQUE0QztRQUM1QyxNQUFNYyxPQUFPLElBQUlwQixrREFBUUE7UUFDekJvQixLQUFLQyxNQUFNLENBQUMsUUFBUUgsV0FBVztZQUM3QkksVUFBVTtZQUNWQyxhQUFhO1FBQ2Y7UUFDQUgsS0FBS0MsTUFBTSxDQUFDLFNBQVM7UUFFckIseUNBQXlDO1FBQ3pDLE1BQU1HLHdCQUF3QixNQUFNM0Isa0RBQVUsQ0FDNUMsa0RBQ0F1QixNQUNBO1lBQ0VNLFNBQVM7Z0JBQ1AsR0FBR04sS0FBS08sVUFBVSxFQUFFO2dCQUNwQixpQkFBaUIsQ0FBQyxPQUFPLEVBQUVDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxDQUFDLENBQUM7WUFDekQ7WUFDQUMsU0FBUztRQUNYO1FBR0Ysc0NBQXNDO1FBQ3RDOUIsb0RBQWEsQ0FBQ0s7UUFFZCxPQUFPa0Isc0JBQXNCUyxJQUFJLENBQUNDLElBQUk7SUFDeEMsRUFBRSxPQUFPQyxPQUFZO1FBQ25CQyxRQUFRRCxLQUFLLENBQUMsNkJBQTZCQTtRQUMzQyxNQUFNLElBQUlFLE1BQU0saUNBQWlDRixNQUFNRyxPQUFPO0lBQ2hFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcmljdGlvbmxvZ2dlci8uL2xpYi93aGlzcGVyLnRzPzMzNjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBmZm1wZWdJbnN0YWxsZXIgZnJvbSAnQGZmbXBlZy1pbnN0YWxsZXIvZmZtcGVnJztcbmltcG9ydCBmZm1wZWcgZnJvbSAnZmx1ZW50LWZmbXBlZyc7XG5pbXBvcnQgeyBQYXNzVGhyb3VnaCB9IGZyb20gJ3N0cmVhbSc7XG5pbXBvcnQgRm9ybURhdGEgZnJvbSAnZm9ybS1kYXRhJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5cbmZmbXBlZy5zZXRGZm1wZWdQYXRoKGZmbXBlZ0luc3RhbGxlci5wYXRoKTtcblxuLyoqXG4gKiBUcmFuc2NyaWJlcyBhdWRpbyBleHRyYWN0ZWQgZnJvbSBhIHZpZGVvIFVSTCB1c2luZyBPcGVuQUkncyBXaGlzcGVyIEFQSS5cbiAqIEBwYXJhbSB2aWRlb1VybCAtIFRoZSBVUkwgb2YgdGhlIHZpZGVvIHRvIHRyYW5zY3JpYmUuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNjcmlwdGlvbiB0ZXh0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdHJhbnNjcmliZUF1ZGlvKHZpZGVvVXJsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIC8vIFN0ZXAgMTogRG93bmxvYWQgdGhlIHZpZGVvIGFuZCBjb252ZXJ0IHRvIE1QMyB1c2luZyBmZm1wZWdcbiAgICBjb25zdCBvdXRwdXRQYXRoID0gYC90bXAvJHtEYXRlLm5vdygpfS5tcDNgO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGZmbXBlZyh2aWRlb1VybClcbiAgICAgICAgLm91dHB1dE9wdGlvbnMoJy12bicpXG4gICAgICAgIC5hdWRpb0NvZGVjKCdsaWJtcDNsYW1lJylcbiAgICAgICAgLmF1ZGlvQml0cmF0ZSgnMTI4aycpXG4gICAgICAgIC5vdXRwdXQob3V0cHV0UGF0aClcbiAgICAgICAgLm9uKCdlbmQnLCByZXNvbHZlKVxuICAgICAgICAub24oJ2Vycm9yJywgcmVqZWN0KVxuICAgICAgICAucnVuKCk7XG4gICAgfSk7XG5cbiAgICAvLyBTdGVwIDI6IFJlYWQgdGhlIE1QMyBmaWxlXG4gICAgY29uc3QgYXVkaW9GaWxlID0gZnMuY3JlYXRlUmVhZFN0cmVhbShvdXRwdXRQYXRoKTtcblxuICAgIC8vIFN0ZXAgMzogUHJlcGFyZSBmb3JtIGRhdGEgZm9yIFdoaXNwZXIgQVBJXG4gICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvcm0uYXBwZW5kKCdmaWxlJywgYXVkaW9GaWxlLCB7XG4gICAgICBmaWxlbmFtZTogJ2F1ZGlvLm1wMycsXG4gICAgICBjb250ZW50VHlwZTogJ2F1ZGlvL21wZWcnLFxuICAgIH0pO1xuICAgIGZvcm0uYXBwZW5kKCdtb2RlbCcsICd3aGlzcGVyLTEnKTtcblxuICAgIC8vIFN0ZXAgNDogU2VuZCBhdWRpbyBmaWxlIHRvIFdoaXNwZXIgQVBJXG4gICAgY29uc3QgdHJhbnNjcmlwdGlvblJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChcbiAgICAgICdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2F1ZGlvL3RyYW5zY3JpcHRpb25zJyxcbiAgICAgIGZvcm0sXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAuLi5mb3JtLmdldEhlYWRlcnMoKSxcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWX1gLFxuICAgICAgICB9LFxuICAgICAgICB0aW1lb3V0OiA2MDAwMCwgLy8gSW5jcmVhc2VkIHRpbWVvdXQgdG8gYWNjb21tb2RhdGUgbG9uZ2VyIHByb2Nlc3NpbmdcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLy8gU3RlcCA1OiBDbGVhbiB1cCB0aGUgdGVtcG9yYXJ5IGZpbGVcbiAgICBmcy51bmxpbmtTeW5jKG91dHB1dFBhdGgpO1xuXG4gICAgcmV0dXJuIHRyYW5zY3JpcHRpb25SZXNwb25zZS5kYXRhLnRleHQ7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiB0cmFuc2NyaWJlQXVkaW86JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHRyYW5zY3JpYmUgYXVkaW86ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImF4aW9zIiwiZmZtcGVnSW5zdGFsbGVyIiwiZmZtcGVnIiwiRm9ybURhdGEiLCJmcyIsInNldEZmbXBlZ1BhdGgiLCJwYXRoIiwidHJhbnNjcmliZUF1ZGlvIiwidmlkZW9VcmwiLCJvdXRwdXRQYXRoIiwiRGF0ZSIsIm5vdyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwib3V0cHV0T3B0aW9ucyIsImF1ZGlvQ29kZWMiLCJhdWRpb0JpdHJhdGUiLCJvdXRwdXQiLCJvbiIsInJ1biIsImF1ZGlvRmlsZSIsImNyZWF0ZVJlYWRTdHJlYW0iLCJmb3JtIiwiYXBwZW5kIiwiZmlsZW5hbWUiLCJjb250ZW50VHlwZSIsInRyYW5zY3JpcHRpb25SZXNwb25zZSIsInBvc3QiLCJoZWFkZXJzIiwiZ2V0SGVhZGVycyIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsInRpbWVvdXQiLCJ1bmxpbmtTeW5jIiwiZGF0YSIsInRleHQiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/whisper.ts\n");

/***/ }),

/***/ "(api)/./pages/api/analyze-video.ts":
/*!************************************!*\
  !*** ./pages/api/analyze-video.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/mux */ \"(api)/./lib/mux.ts\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/supabase */ \"(api)/./lib/supabase.ts\");\n/* harmony import */ var _lib_whisper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/whisper */ \"(api)/./lib/whisper.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_mux__WEBPACK_IMPORTED_MODULE_0__, _lib_whisper__WEBPACK_IMPORTED_MODULE_2__]);\n([_lib_mux__WEBPACK_IMPORTED_MODULE_0__, _lib_whisper__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        try {\n            const { url: uploadUrl, uploadId } = await (0,_lib_mux__WEBPACK_IMPORTED_MODULE_0__.createUploadUrl)();\n            res.status(200).json({\n                uploadUrl,\n                uploadId\n            });\n        } catch (error) {\n            console.error(\"Error creating upload URL:\", error);\n            res.status(500).json({\n                error: \"Error creating upload URL\"\n            });\n        }\n    } else if (req.method === \"GET\") {\n        const { uploadId } = req.query;\n        if (typeof uploadId !== \"string\") {\n            return res.status(400).json({\n                error: \"Invalid uploadId (expected Upload ID)\"\n            });\n        }\n        try {\n            const actualAssetId = await (0,_lib_mux__WEBPACK_IMPORTED_MODULE_0__.getAssetIdFromUpload)(uploadId);\n            if (!actualAssetId) {\n                return res.status(400).json({\n                    error: \"Could not retrieve Asset ID from Upload ID\"\n                });\n            }\n            const asset = await (0,_lib_mux__WEBPACK_IMPORTED_MODULE_0__.getAssetDetails)(actualAssetId);\n            if (!asset) {\n                return res.status(404).json({\n                    error: \"Asset not found\"\n                });\n            }\n            console.log(`Asset Status: ${asset.status}`);\n            if (asset.status !== \"ready\") {\n                return res.status(400).json({\n                    error: \"Asset is not ready yet\"\n                });\n            }\n            // **Updated Section**: Use the asset's playback ID for transcription\n            const playbackId = asset.playback_ids?.[0]?.id;\n            if (!playbackId) {\n                return res.status(400).json({\n                    error: \"Asset playback ID not available\"\n                });\n            }\n            const videoUrl = `https://stream.mux.com/${playbackId}.m3u8`;\n            // Transcribe the audio\n            const transcript = await (0,_lib_whisper__WEBPACK_IMPORTED_MODULE_2__.transcribeAudio)(videoUrl);\n            // Insert into Supabase\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"friction_logs\").insert({\n                video_url: videoUrl,\n                log: transcript,\n                recommendations: []\n            }).select().single();\n            if (error) {\n                console.error(\"Supabase error:\", error);\n                return res.status(500).json({\n                    error: \"Error inserting data into database\"\n                });\n            }\n            res.status(200).json({\n                playbackId: asset.playback_ids?.[0]?.id,\n                frictionLogId: data.id,\n                log: transcript\n            });\n        } catch (error) {\n            console.error(\"Error processing video:\", error);\n            res.status(500).json({\n                error: \"Error processing video\"\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", [\n            \"POST\",\n            \"GET\"\n        ]);\n        res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3pEO0lBQ0YsT0FBTztRQUNMUCxJQUFJMEIsU0FBUyxDQUFDLFNBQVM7WUFBQztZQUFRO1NBQU07UUFDdEMxQixJQUFJSyxNQUFNLENBQUMsS0FBS3NCLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRTVCLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7SUFDeEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZyaWN0aW9ubG9nZ2VyLy4vcGFnZXMvYXBpL2FuYWx5emUtdmlkZW8udHM/YzE5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBjcmVhdGVVcGxvYWRVcmwsIGdldEFzc2V0SWRGcm9tVXBsb2FkLCBnZXRBc3NldERldGFpbHMgfSBmcm9tICcuLi8uLi9saWIvbXV4JztcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi4vLi4vbGliL3N1cGFiYXNlJztcbmltcG9ydCB7IHRyYW5zY3JpYmVBdWRpbyB9IGZyb20gJy4uLy4uL2xpYi93aGlzcGVyJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdXJsOiB1cGxvYWRVcmwsIHVwbG9hZElkIH0gPSBhd2FpdCBjcmVhdGVVcGxvYWRVcmwoKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXBsb2FkVXJsLCB1cGxvYWRJZCB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXBsb2FkIFVSTDonLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRXJyb3IgY3JlYXRpbmcgdXBsb2FkIFVSTCcgfSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgY29uc3QgeyB1cGxvYWRJZCB9ID0gcmVxLnF1ZXJ5O1xuXG4gICAgaWYgKHR5cGVvZiB1cGxvYWRJZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCB1cGxvYWRJZCAoZXhwZWN0ZWQgVXBsb2FkIElEKScgfSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFjdHVhbEFzc2V0SWQgPSBhd2FpdCBnZXRBc3NldElkRnJvbVVwbG9hZCh1cGxvYWRJZCk7XG4gICAgICBpZiAoIWFjdHVhbEFzc2V0SWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdDb3VsZCBub3QgcmV0cmlldmUgQXNzZXQgSUQgZnJvbSBVcGxvYWQgSUQnIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhc3NldCA9IGF3YWl0IGdldEFzc2V0RGV0YWlscyhhY3R1YWxBc3NldElkKTtcbiAgICAgIGlmICghYXNzZXQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdBc3NldCBub3QgZm91bmQnIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhgQXNzZXQgU3RhdHVzOiAke2Fzc2V0LnN0YXR1c31gKTtcblxuICAgICAgaWYgKGFzc2V0LnN0YXR1cyAhPT0gJ3JlYWR5Jykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0Fzc2V0IGlzIG5vdCByZWFkeSB5ZXQnIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyAqKlVwZGF0ZWQgU2VjdGlvbioqOiBVc2UgdGhlIGFzc2V0J3MgcGxheWJhY2sgSUQgZm9yIHRyYW5zY3JpcHRpb25cbiAgICAgIGNvbnN0IHBsYXliYWNrSWQgPSBhc3NldC5wbGF5YmFja19pZHM/LlswXT8uaWQ7XG5cbiAgICAgIGlmICghcGxheWJhY2tJZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0Fzc2V0IHBsYXliYWNrIElEIG5vdCBhdmFpbGFibGUnIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB2aWRlb1VybCA9IGBodHRwczovL3N0cmVhbS5tdXguY29tLyR7cGxheWJhY2tJZH0ubTN1OGA7XG5cbiAgICAgIC8vIFRyYW5zY3JpYmUgdGhlIGF1ZGlvXG4gICAgICBjb25zdCB0cmFuc2NyaXB0ID0gYXdhaXQgdHJhbnNjcmliZUF1ZGlvKHZpZGVvVXJsKTtcblxuICAgICAgLy8gSW5zZXJ0IGludG8gU3VwYWJhc2VcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdmcmljdGlvbl9sb2dzJylcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgdmlkZW9fdXJsOiB2aWRlb1VybCxcbiAgICAgICAgICBsb2c6IHRyYW5zY3JpcHQsXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXSxcbiAgICAgICAgfSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdFcnJvciBpbnNlcnRpbmcgZGF0YSBpbnRvIGRhdGFiYXNlJyB9KTtcbiAgICAgIH1cblxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBwbGF5YmFja0lkOiBhc3NldC5wbGF5YmFja19pZHM/LlswXT8uaWQsIGZyaWN0aW9uTG9nSWQ6IGRhdGEuaWQsIGxvZzogdHJhbnNjcmlwdCB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyB2aWRlbzonLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRXJyb3IgcHJvY2Vzc2luZyB2aWRlbycgfSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydQT1NUJywgJ0dFVCddKTtcbiAgICByZXMuc3RhdHVzKDQwNSkuZW5kKGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlVXBsb2FkVXJsIiwiZ2V0QXNzZXRJZEZyb21VcGxvYWQiLCJnZXRBc3NldERldGFpbHMiLCJzdXBhYmFzZSIsInRyYW5zY3JpYmVBdWRpbyIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJ1cmwiLCJ1cGxvYWRVcmwiLCJ1cGxvYWRJZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJxdWVyeSIsImFjdHVhbEFzc2V0SWQiLCJhc3NldCIsImxvZyIsInBsYXliYWNrSWQiLCJwbGF5YmFja19pZHMiLCJpZCIsInZpZGVvVXJsIiwidHJhbnNjcmlwdCIsImRhdGEiLCJmcm9tIiwiaW5zZXJ0IiwidmlkZW9fdXJsIiwicmVjb21tZW5kYXRpb25zIiwic2VsZWN0Iiwic2luZ2xlIiwiZnJpY3Rpb25Mb2dJZCIsInNldEhlYWRlciIsImVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/analyze-video.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-video&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze-video.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();